import streamlit as st
import pandas as pd
import os

# App Configuration
"st.set_page_config(page_title=""ACAG Portal"", layout=""centered"")"

# Login Details
"ADMIN_USER = ""Imran.Elahi"""
"ADMIN_PASS = ""Lootlomufta"""
# Note: Ensure this filename matches your uploaded CSV exactly
"DATA_FILE = ""ACAG Portal Data.csv - Sheet1.csv"""

if 'logged_in' not in st.session_state:
    st.session_state['logged_in'] = False

def login():
"    st.markdown(""<h2 style='text-align: center;'>?? ??? ??</h2>"", unsafe_allow_html=True)"
"    u = st.text_input(""Username"")"
"    p = st.text_input(""Password"", type=""password"")"
"    if st.button(""Login"", use_container_width=True):"
        if u == ADMIN_USER and p == ADMIN_PASS:
            st.session_state['logged_in'] = True
            st.rerun()
        else:
"            st.error(""??? ???? ??? ?? ??? ???"")"

def main():
"    st.sidebar.success(f""??? ????? {ADMIN_USER}"")"
"    choice = st.sidebar.radio(""?????"", [""??? ??????"", ""???? ?? ??? ????""])"

"    if choice == ""??? ??????"":"
"        st.header(""?? ?????? ???? ????"")"
"        cnic = st.text_input(""CNIC ???? ????? (???? ??? ??)"")"
"        if st.button(""??? ????""):"
            if os.path.exists(DATA_FILE):
"                df = pd.read_csv(DATA_FILE, dtype={'ApplicantCNIC': str})"
                res = df[df['ApplicantCNIC'] == str(cnic)]
                if not res.empty:
"                    st.success(""?????? ?? ???!"")"
"                    st.write(f""**???:** {res.iloc[0]['ApplicantName']}"")"
"                    st.write(f""**??? ????:** {res.iloc[0]['Batch No.']}"")"
                else:
"                    st.warning(""???? ?????? ???? ????"")"
            else:
"                st.error(""???? ???? ???? ???? ???? ??? ?? ??? ????? ??? ?????"")"

"    elif choice == ""???? ?? ??? ????"":"
"        st.header(""?? ??? ???? ?? ??? ????"")"
"        f = st.file_uploader(""CSV ???? ????? ????"", type=['csv'])"
"        if f and st.button(""????? ????""):"
"            with open(DATA_FILE, ""wb"") as file:"
                file.write(f.getbuffer())
"            st.success(""???? ??????? ?? ?? ??? ?? ???!"")"

if not st.session_state['logged_in']:
    login()
else:
    main()
